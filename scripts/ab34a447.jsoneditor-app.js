function Notify(){this.dom={};var a=this;jsoneditor.util.addEventListener(document,"keydown",function(b){a.onKeyDown(b)})}function Splitter(a){if(!a||!a.container)throw new Error("params.container undefined in Splitter constructor");var b=this;jsoneditor.util.addEventListener(a.container,"mousedown",function(a){b.onMouseDown(a)}),this.container=a.container,this.snap=Number(a.snap)||200,this.width=void 0,this.value=void 0,this.onChange=a.change?a.change:function(){},this.params={}}Notify.prototype.showNotification=function(a){return this.showMessage({type:"notification",message:a,closeButton:!1})},Notify.prototype.showError=function(a){return this.showMessage({type:"error",message:a.message?"Error: "+a.message:a.toString(),closeButton:!0})},Notify.prototype.showMessage=function(a){var b=this.dom.frame;if(!b){var c=500,d=5,e=document.body.offsetWidth||window.innerWidth;b=document.createElement("div"),b.style.position="absolute",b.style.left=(e-c)/2+"px",b.style.width=c+"px",b.style.top=d+"px",b.style.zIndex="999",document.body.appendChild(b),this.dom.frame=b}var f=a.type||"notification",g=a.closeButton!==!1,h=document.createElement("div");h.className=f,h.type=f,h.closeable=g,h.style.position="relative",b.appendChild(h);var i=document.createElement("table");i.style.width="100%",h.appendChild(i);var j=document.createElement("tbody");i.appendChild(j);var k=document.createElement("tr");j.appendChild(k);var l=document.createElement("td");if(l.innerHTML=a.message||"",k.appendChild(l),g){var m=document.createElement("td");m.style.textAlign="right",m.style.verticalAlign="top",k.appendChild(m);var n=document.createElement("button");n.innerHTML="&times;",n.title="Close message (ESC)",m.appendChild(n);var o=this;n.onclick=function(){o.removeMessage(h)}}return h},Notify.prototype.removeMessage=function(a){var b=this.dom.frame;if(!a&&b){for(var c=b.firstChild;c&&!c.closeable;)c=c.nextSibling;c&&c.closeable&&(a=c)}a&&a.parentNode==b&&a.parentNode.removeChild(a),b&&0==b.childNodes.length&&(b.parentNode.removeChild(b),delete this.dom.frame)},Notify.prototype.onKeyDown=function(a){var b=a.which;27==b&&(this.removeMessage(),a.preventDefault(),a.stopPropagation())},Splitter.prototype.onMouseDown=function(a){var b=this,c=a.which?1==a.which:1==a.button;c&&(jsoneditor.util.addClassName(this.container,"active"),this.params.mousedown||(this.params.mousedown=!0,this.params.mousemove=jsoneditor.util.addEventListener(document,"mousemove",function(a){b.onMouseMove(a)}),this.params.mouseup=jsoneditor.util.addEventListener(document,"mouseup",function(a){b.onMouseUp(a)}),this.params.screenX=a.screenX,this.params.changed=!1,this.params.value=this.getValue()),a.preventDefault(),a.stopPropagation())},Splitter.prototype.onMouseMove=function(a){if(void 0!=this.width){var b=a.screenX-this.params.screenX,c=this.params.value+b/this.width;c=this.setValue(c),c!=this.params.value&&(this.params.changed=!0),this.onChange(c)}a.preventDefault(),a.stopPropagation()},Splitter.prototype.onMouseUp=function(a){if(jsoneditor.util.removeClassName(this.container,"active"),this.params.mousedown){jsoneditor.util.removeEventListener(document,"mousemove",this.params.mousemove),jsoneditor.util.removeEventListener(document,"mouseup",this.params.mouseup),this.params.mousemove=void 0,this.params.mouseup=void 0,this.params.mousedown=!1;var b=this.getValue();this.params.changed||(0==b&&(b=this.setValue(.2),this.onChange(b)),1==b&&(b=this.setValue(.8),this.onChange(b)))}a.preventDefault(),a.stopPropagation()},Splitter.prototype.setWidth=function(a){this.width=a},Splitter.prototype.setValue=function(a){a=Number(a),void 0!=this.width&&this.width>this.snap&&(a<this.snap/this.width&&(a=0),a>(this.width-this.snap)/this.width&&(a=1)),this.value=a;try{localStorage.splitterValue=a}catch(b){console&&console.log&&console.log(b)}return a},Splitter.prototype.getValue=function(){var a=this.value;if(void 0==a)try{void 0!=localStorage.splitterValue&&(a=Number(localStorage.splitterValue),a=this.setValue(a))}catch(b){console.log(b)}return void 0==a&&(a=this.setValue(.5)),a};var treeEditor=null,codeEditor=null,app={};app.CodeToTree=function(){try{treeEditor.set(codeEditor.get())}catch(a){app.notify.showError(app.formatError(a))}},app.treeToCode=function(){try{codeEditor.set(treeEditor.get())}catch(a){app.notify.showError(app.formatError(a))}},app.load=function(){try{app.notify=new Notify;var a={array:[1,2,3],"boolean":!0,"null":null,number:123,object:{a:"b",c:"d",e:"f"},string:"Hello World"};if(window.QueryParams){var b=new QueryParams,c=b.getValue("url");c&&(a={},app.openUrl(c))}app.lastChanged=void 0;var d=document.getElementById("codeEditor");codeEditor=new jsoneditor.JSONEditor(d,{mode:"code",change:function(){app.lastChanged=codeEditor},error:function(a){app.notify.showError(app.formatError(a))}}),codeEditor.set(a),d=document.getElementById("treeEditor"),treeEditor=new jsoneditor.JSONEditor(d,{mode:"tree",change:function(){app.lastChanged=treeEditor},error:function(a){app.notify.showError(app.formatError(a))}}),treeEditor.set(a),app.splitter=new Splitter({container:document.getElementById("drag"),change:function(){app.resize()}});var e=document.getElementById("toTree");e.onclick=function(){this.focus(),app.CodeToTree()};var f=document.getElementById("toCode");f.onclick=function(){this.focus(),app.treeToCode()},jsoneditor.util.addEventListener(window,"resize",app.resize),codeEditor.focus(),document.body.spellcheck=!1}catch(g){try{app.notify.showError(g)}catch(h){console&&console.log&&console.log(g),alert(g)}}},app.openCallback=function(a,b){if(a)app.notify.showError(a);else if(null!=b){codeEditor.setText(b);try{var c=jsoneditor.util.parse(b);treeEditor.set(c)}catch(a){treeEditor.set({}),app.notify.showError(app.formatError(a))}}},app.formatError=function(a){var b='<pre class="error">'+a.toString()+"</pre>";return"undefined"!=typeof jsonlint&&(b+='<a class="error" href="http://zaach.github.com/jsonlint/" target="_blank">validated by jsonlint</a>'),b},app.clearFile=function(){var a={};codeEditor.set(a),treeEditor.set(a)},app.resize=function(){var a=document.getElementById("treeEditor"),b=document.getElementById("codeEditor"),c=document.getElementById("splitter"),d=document.getElementById("buttons"),e=document.getElementById("drag"),f=15,g=window.innerWidth||document.body.offsetWidth||document.documentElement.offsetWidth;if(app.splitter){app.splitter.setWidth(g);var h=app.splitter.getValue(),i=h>0,j=1>h,k=i&&j;d.style.display=k?"":"none";var l,m=c.clientWidth;if(i)if(j){l=g*h-m/2;var n=8==jsoneditor.util.getInternetExplorerVersion();e.innerHTML=n?"|":"&#8942;",e.title="Drag left or right to change the width of the panels"}else l=g*h-m,e.innerHTML="&lsaquo;",e.title="Drag left to show the tree editor";else l=0,e.innerHTML="&rsaquo;",e.title="Drag right to show the code editor";b.style.display=0==h?"none":"",b.style.width=Math.max(Math.round(l),0)+"px",codeEditor.resize(),e.style.height=c.clientHeight-d.clientHeight-2*f-(k?f:0)+"px",e.style.lineHeight=e.style.height,a.style.display=1==h?"none":"",a.style.left=Math.round(l+m)+"px",a.style.width=Math.max(Math.round(g-l-m-2),0)+"px"}};